<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Calcul rapide des niveaux de support et résistance roulants — calculate_rolling_support_resistance_fast • hmmTradeR</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Calcul rapide des niveaux de support et résistance roulants — calculate_rolling_support_resistance_fast"><meta property="og:description" content="Calcule pour chaque pas de temps un niveau de support et de résistance « centré »
sur une petite fenêtre (paramètre `width`) au sein d'une fenêtre historique plus large
(paramètre `window_size`). La fonction recherche, pour chaque fin de fenêtre historique,
le point central d'une petite fenêtre qui correspond au minimum (support) ou au maximum
(résistance) de cette petite fenêtre. Les calculs sont optimisés avec des déques pour
le sliding min/max."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">hmmTradeR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Calcul rapide des niveaux de support et résistance roulants</h1>

    <div class="hidden name"><code>calculate_rolling_support_resistance_fast.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Calcule pour chaque pas de temps un niveau de support et de résistance « centré »
sur une petite fenêtre (paramètre `width`) au sein d'une fenêtre historique plus large
(paramètre `window_size`). La fonction recherche, pour chaque fin de fenêtre historique,
le point central d'une petite fenêtre qui correspond au minimum (support) ou au maximum
(résistance) de cette petite fenêtre. Les calculs sont optimisés avec des déques pour
le sliding min/max.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">calculate_rolling_support_resistance_fast</span><span class="op">(</span></span>
<span>  <span class="va">dates</span>,</span>
<span>  <span class="va">opens</span>,</span>
<span>  <span class="va">highs</span>,</span>
<span>  <span class="va">lows</span>,</span>
<span>  <span class="va">closes</span>,</span>
<span>  <span class="va">volumes</span>,</span>
<span>  <span class="va">adjusted</span>,</span>
<span>  window_size <span class="op">=</span> <span class="fl">100L</span>,</span>
<span>  width <span class="op">=</span> <span class="fl">20L</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-dates">dates<a class="anchor" aria-label="anchor" href="#arg-dates"></a></dt>
<dd><p>CharacterVector : vecteur de dates/horodatages (sous forme de chaîne).</p></dd>


<dt id="arg-opens">opens<a class="anchor" aria-label="anchor" href="#arg-opens"></a></dt>
<dd><p>NumericVector : prix d'ouverture.</p></dd>


<dt id="arg-highs">highs<a class="anchor" aria-label="anchor" href="#arg-highs"></a></dt>
<dd><p>NumericVector : prix haut.</p></dd>


<dt id="arg-lows">lows<a class="anchor" aria-label="anchor" href="#arg-lows"></a></dt>
<dd><p>NumericVector : prix bas.</p></dd>


<dt id="arg-closes">closes<a class="anchor" aria-label="anchor" href="#arg-closes"></a></dt>
<dd><p>NumericVector : prix de clôture.</p></dd>


<dt id="arg-volumes">volumes<a class="anchor" aria-label="anchor" href="#arg-volumes"></a></dt>
<dd><p>NumericVector : volumes.</p></dd>


<dt id="arg-adjusted">adjusted<a class="anchor" aria-label="anchor" href="#arg-adjusted"></a></dt>
<dd><p>NumericVector : prix ajustés utilisés pour détecter min/max (typiquement close ou adjusted).</p></dd>


<dt id="arg-window-size">window_size<a class="anchor" aria-label="anchor" href="#arg-window-size"></a></dt>
<dd><p>integer (par défaut 100) : taille de la fenêtre historique (nombre de barres) utilisée pour calculer un support/résistance à chaque pas.</p></dd>


<dt id="arg-width">width<a class="anchor" aria-label="anchor" href="#arg-width"></a></dt>
<dd><p>integer (par défaut 20) : largeur de la petite fenêtre sur laquelle on calcule le min/max centré (doit être &gt;= 1 et &lt;= longueur de la série).</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>DataFrame contenant les colonnes : Date, Open, High, Low, Close, Volume, Adjusted, Support, Resistance.
        Support/Resistance contiennent la valeur du niveau trouvé pour la date correspondante (ou NA si introuvable).</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>Les vecteurs d'entrée doivent être de même longueur. Les NA dans `adjusted` sont traités
en évitant les comparaisons ; si la valeur du min/max est NA, le résultat pour cette
petite fenêtre sera NA.</p>

<p>- Exécution : la fonction est conçue pour être appelée depuis R après compilation du package.
- Tolérance : une petite tolérance numérique (1e-12) est utilisée pour comparer égalité center == min/max.
- Complexité : la recherche du sliding min/max est linéaire grâce aux déques ; la boucle principale parcourt les étapes historiques.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># Exemple R (après compilation et installation du package)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">hmmTradeR</span><span class="op">)</span> <span class="co"># remplacer par le nom réel du package</span></span></span>
<span class="r-in"><span><span class="co"># données fictives</span></span></span>
<span class="r-in"><span><span class="va">dates</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.Date</a></span><span class="op">(</span><span class="op">)</span> <span class="op">-</span> <span class="fl">9</span><span class="op">:</span><span class="fl">0</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">n</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">dates</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">opens</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="va">n</span>, <span class="fl">99</span>, <span class="fl">101</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">highs</span> <span class="op">&lt;-</span> <span class="va">opens</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="va">n</span>, <span class="fl">0</span>, <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">lows</span>  <span class="op">&lt;-</span> <span class="va">opens</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="va">n</span>, <span class="fl">0</span>, <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">closes</span> <span class="op">&lt;-</span> <span class="op">(</span><span class="va">highs</span> <span class="op">+</span> <span class="va">lows</span><span class="op">)</span> <span class="op">/</span> <span class="fl">2</span></span></span>
<span class="r-in"><span><span class="va">volumes</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">100</span><span class="op">:</span><span class="fl">1000</span>, <span class="va">n</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">adjusted</span> <span class="op">&lt;-</span> <span class="va">closes</span></span></span>
<span class="r-in"><span><span class="co"># appel</span></span></span>
<span class="r-in"><span><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu">calculate_rolling_support_resistance_fast</span><span class="op">(</span><span class="va">dates</span>, <span class="va">opens</span>, <span class="va">highs</span>, <span class="va">lows</span>, <span class="va">closes</span>, <span class="va">volumes</span>, <span class="va">adjusted</span>, window_size <span class="op">=</span> <span class="fl">5</span>, width <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">res</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Serge Moisan.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

      </footer></div>






  </body></html>

